#include "zmk-nodefree-config-main/keypos_def/keypos_36keys.h"

#define COMBO_TERM_FAST 35
#define COMBO_TERM_SLOW 40
#define COMBO_TERM_EXTRA_SLOW 45
#define COMBO_GLOBAL_QUICKTAP 100

/ {
  combos {
    compatible = "zmk,combos";

    combo_percent {
      timeout-ms = <COMBO_TERM_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <LT4 LT3>;
      layers = <ALL>;
      bindings = <&kp PERCENT>;
    };

    combo_caret {
      timeout-ms = <COMBO_TERM_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <LM4 LM3>;
      layers = <ALL>;
      bindings = <&kp CARET>;
    };

    combo_exclamation {
      timeout-ms = <COMBO_TERM_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <LB4 LB3>;
      layers = <ALL>;
      bindings = <&kp EXCLAMATION>;
    };

    combo_backslash {
      timeout-ms = <COMBO_TERM_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <LT3 LT2>;
      layers = <ALL>;
      bindings = <&kp BACKSLASH>;
    };

    combo_dollar {
      timeout-ms = <COMBO_TERM_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <LM3 LM2>;
      layers = <ALL>;
      bindings = <&kp DOLLAR>;
    };

    combo_at_the_rate {
      timeout-ms = <COMBO_TERM_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <LB3 LB2>;
      layers = <ALL>;
      bindings = <&kp AT>;
    };

    combo_bracket_square_l {
      timeout-ms = <COMBO_TERM_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <LT2 LT1>;
      layers = <ALL>;
      bindings = <&kp LBKT>;
    };
    
    combo_bracket_round_l {
      timeout-ms = <COMBO_TERM_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <LM2 LM1>;
      layers = <ALL>;
      bindings = <&kp LPAR>;
    };    
    
    combo_bracket_curly_l {
      timeout-ms = <COMBO_TERM_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <LB2 LB1>;
      layers = <ALL>;
      bindings = <&kp LBRC>;
    };

    combo_bracket_square_r {
      timeout-ms = <COMBO_TERM_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <RT2 RT1>;
      layers = <ALL>;
      bindings = <&kp RBKT>;
    };

    combo_bracket_round_r {
      timeout-ms = <COMBO_TERM_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <RM1 RM2>;
      layers = <ALL>;
      bindings = <&kp RPAR>;
    };

    combo_bracket_curly_r {
      timeout-ms = <COMBO_TERM_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <RB1 RB2>;
      layers = <ALL>;
      bindings = <&kp RBRC>;
    };

    combo_equal {
      timeout-ms = <COMBO_TERM_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <RT3 RT2>;
      layers = <ALL>;
      bindings = <&kp EQUAL>;
    };

    combo_semicolon {
      timeout-ms = <COMBO_TERM_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <RM3 RM2>;
      layers = <ALL>;
      bindings = <&kp SEMICOLON>;
    };

    combo_slash {
      timeout-ms = <COMBO_TERM_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <RB3 RB2>;
      layers = <ALL>;
      bindings = <&kp SLASH>;
    };

    combo_plus {
      timeout-ms = <COMBO_TERM_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <RT4 RT3>;
      layers = <ALL>;
      bindings = <&kp PLUS>;
    };

    combo_colon {
      timeout-ms = <COMBO_TERM_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <RM4 RM3>;
      layers = <ALL>;
      bindings = <&kp COLON>;
    };

    combo_question {
      timeout-ms = <COMBO_TERM_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <RB4 RB3>;
      layers = <ALL>;
      bindings = <&kp QUESTION>;
    };


    // Left - Top row
    combo_grave {
      timeout-ms = <COMBO_TERM_EXTRA_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <LT3 LM3>;
      layers = <ALL>;
      bindings = <&kp GRAVE>;
    };

    combo_ampersand {
      timeout-ms = <COMBO_TERM_EXTRA_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <LT2 LM2>;
      layers = <ALL>;
      bindings = <&kp AMPERSAND>;
    };

    combo_asterisk {
      timeout-ms = <COMBO_TERM_EXTRA_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <LT1 LM1>;
      layers = <ALL>;
      bindings = <&kp ASTERISK>;
    };


    // Left - Mid row
    combo_tilde {
      timeout-ms = <COMBO_TERM_EXTRA_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <LM3 LB3>;
      layers = <ALL>;
      bindings = <&kp TILDE>;
    };

    combo_pipe {
      timeout-ms = <COMBO_TERM_EXTRA_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <LM2 LB2>;
      layers = <ALL>;
      bindings = <&kp PIPE>;
    };

    combo_hash {
      timeout-ms = <COMBO_TERM_EXTRA_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <LM1 LB1>;
      layers = <ALL>;
      bindings = <&kp HASH>;
    };


    // Right - Top row
    combo_under {
      timeout-ms = <COMBO_TERM_EXTRA_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <RT1 RM1>;
      layers = <ALL>;
      bindings = <&kp UNDER>;
    };

    combo_double_quotes {
      timeout-ms = <COMBO_TERM_EXTRA_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <RT2 RM2>;
      layers = <ALL>;
      bindings = <&kp DOUBLE_QUOTES>;
    };

    combo_apostrophe {
      timeout-ms = <COMBO_TERM_EXTRA_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <RT3 RM3>;
      layers = <ALL>;
      bindings = <&kp APOSTROPHE>;
    };


    // Right - Mid row
    combo_minus {
      timeout-ms = <COMBO_TERM_EXTRA_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <RM1 RB1>;
      layers = <ALL>;
      bindings = <&kp MINUS>;
    };

    combo_enter {
      timeout-ms = <COMBO_TERM_EXTRA_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <RM2 RB2>;
      layers = <ALL>;
      bindings = <&kp ENTER>;
    };

    combo_delete {
      timeout-ms = <COMBO_TERM_EXTRA_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <RM3 RB3>;
      layers = <ALL>;
      bindings = <&kp DELETE>;
    };

    
    /* Other */
    tab {
      timeout-ms = <COMBO_TERM_EXTRA_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <RT0 RM0>;
      layers = <ALL>;
      bindings = <&kp TAB>;
    };

    escape {
      timeout-ms = <COMBO_TERM_EXTRA_SLOW>;
      global-quick-tap-ms = <COMBO_GLOBAL_QUICKTAP>;

      key-positions = <LT0 LM0>;
      layers = <ALL>;
      bindings = <&kp ESCAPE>;
    };
  };
};
